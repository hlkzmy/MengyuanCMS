<?php 
$script = sprintf('$(document).ready(function(){
		
	$(".chapter").recordplayer({
			"video_id":"%s",
			"post_url":"%s",
			"swf_url"		:"%s",
		    "expresss_url":"%s",
			"point":"%s",
	});
		
});',$video['id'],$this->url('cms',array('controller'=>'VideoNewRecordPlayer','action'=>'AjaxGetRecordVideoPlayInfo')),
		$this->basePath('/plugin/recordplayer/recordplayer.swf'),$this->basePath('/plugin/recordplayer/expressInstall.swf'),
		isset($video['point'])?$video['point']:null
		);

$this->headScript()->appendScript($script);
?>
<div class="play">
	         	 <?php echo $this->htmlFlash($this->basePath('/plugin/recordplayer/recordplayer.swf'),
	         	 							 array('width'=>'100%','height'=>'460','id'=>'RecordVideo'),
	         	 							 array('allowFullScreen'=>'true','allowScriptAccess'=>'true','wmode'=>'transparent')
	         	 							);
	         	 ?>


</div>
  <div class="info"> <span class="title">课程简介</span>
    <ul>
      <li>课程：<?php echo $videoInfo['name']?></li>
      <li>主讲：<?php echo $videoInfo['user_name']?></li>
      <li>学历：<?php echo $videoInfo['video_subject']?></li>
      <li>学校：<?php echo $videoInfo['school_name']?></li>
      <li>年级：<?php echo $videoInfo['video_grade']?></li>
      <li>简介：<?php echo $videoInfo['description']?></li>
    </ul>
  </div>
  <div class="chapter"> <span class="title">课程章节</span>
    <div class="scroll">
      <ul>
        
              <?php for($i=0;$i< $video['chapter_count'];$i++):?>
              <?php $j = $i+1; ?>
      		  <li class='chapterPlayButton' chapter_number='<?php echo $j;?>'>第<?php echo $j;?>节</li>
               <?php endfor;?>
      </ul>
    </div>
  </div>
  <div id="star"></div>
<script type="text/javascript">
<!--

$("#star").raty({

path:"<?php echo $this->basePath();?>/theme/resource/video/play/star/img",
hints: ["2", "4", "6", "8", "10"],
starOff: "star-off-big.png",
starOn: "star-on-big.png",
starHalf:"star-half-big.png",
size:24,
half:true,
score:<?php echo $video['score']/2;?>,
click: function (score, evt) {

            $postData = {'score':score*2,'videoId':<?php echo $video['id'];?>};

            $PostUrl = "<?php echo $this->url('cms',array('controller'=>'VideoNewRecordPlayer','action'=>'ajaxSetVideoSorce'));?>";
            
        	AjaxGetJsonData($postData,$PostUrl,function(msg){
				if(msg.statusCode == 200){
		        		$("#star").raty({
		        			path:"<?php echo $this->basePath();?>/theme/resource/video/play/star/img",
		        			hints: ["2", "4", "6", "8", "10"],
		        			starOff: "star-off-big.png",
		        			starOn: "star-on-big.png",
		        			starHalf:"star-half-big.png",
		        			score:score,
		        			size:24,
		        			half:true,
		        			readOnly:true
		        			
		                });

		                alert("评分成功，您的评分为"+score*2+"分，感谢您的评价");
		        }else{
					alert(msg.message);
		        }

		        
		    },'json');
        		

        }	
	

});
//-->
</script>

